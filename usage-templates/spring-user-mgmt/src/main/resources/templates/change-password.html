<!DOCTYPE html>

<html lang="en" xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="http://www.thymeleaf.org/thymeleaf-extras-springsecurity6"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="layouts/default-layout-blank">

<body>
<div layout:fragment="content">
    <div class="forgot-password-page">
        <div class="container mt-5  text-center">
            <div class="row">
                <div class="col ">
                    <div class="d-flex justify-content-center align-items-center ">
                        <div class="card p-4 shadow-lg text-center text-white forgot-password-box">
                            <div class="mb-3">
                                <a th:href="@{/web/home}"><img th:src="@{/img/key.png}" alt="Reset Icon" width="100"></a>
                            </div>
                            <h3>Change password ?</h3>
                            <p class="text-white-50">Do not refresh this page, fill-in details and submit.</p>

                            <div th:if="${successMsg}" class="success">
                                <div class="alert alert-success alert-dismissible show" role="alert">
                                    <span th:text="${successMsg}"></span><br/>
                                    <strong>Navigate back to <a th:href="@{/web/home}">Home</a> </strong>
                                    <button type="button" class="btn-close" data-bs-dismiss="alert"
                                            aria-label="Close"></button>
                                </div>
                            </div>

                            <div th:unless="${successMsg}" class="error">
                                <div th:if="${errorMsg}" class="error">
                                    <div class="alert alert-danger alert-dismissible show" role="alert">
                                        <span th:text="${errorMsg}"></span><br/>
                                        <strong>Navigate back to <a th:href="@{/web/home}">Home</a> </strong>
                                        <button type="button" class="btn-close" data-bs-dismiss="alert"
                                                aria-label="Close"></button>
                                    </div>
                                </div>

                                <div th:unless="${errorMsg}">
                                    <form th:action="@{/web/change-password}" method="post">
                                        <input type="hidden" name="authenticityToken" th:value="${authenticityToken}" autocomplete="off">
                                        <input type="hidden" name="passwordResetToken" th:value="${passwordResetToken}" autocomplete="off">
                                        <div class="mb-3 glow-on-select">
                                            <div class="input-group">
                                                <span class="input-group-text"><i class="fa-regular fa-envelope"></i></span>
                                                <input type="email" name="email" class="form-control" placeholder="Email" required>
                                            </div>
                                        </div>

                                        <div class="mb-3 glow-on-select">
                                            <div class="input-group">
                                                <span class="input-group-text"><i class="fa-regular fa-envelope"></i></span>
                                                <input type="password" name="password" class="form-control" placeholder="Password" required>
                                            </div>
                                        </div>

                                        <div class="mb-3 glow-on-select">
                                            <div class="input-group">
                                                <span class="input-group-text"><i class="fa-regular fa-envelope"></i></span>
                                                <input type="password" name="repeat-password" class="form-control" placeholder="Repeat Password" required>
                                            </div>
                                        </div>
                                        <button type="submit" class="btn btn-danger w-100">Change Password</button>
                                    </form>
                                </div>
                            </div>
                            <div class="mt-3">
                                <a th:href="@{/web/login}" class="text-decoration-none">&larr; Back to login</a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
</body>
</html>